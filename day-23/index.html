<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="src/css/tailwind.min.css" />
    <title>Image Grid</title>
  </head>
  <body>
    <div id="app">
          <!-- {{ lists }} -->
      <div class="container mx-auto mt-10" v-if="!popup" style="max-width: 600px;">
        <input
          type="text"
          v-model="searchQuery"
          v-on:input="filteredResources"
          class="bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 my-5 block w-full appearance-none leading-normal"
        />
        <div v-if="searchQuery.length>=3">
          Hasil dari pencarian
          <span class="text-white px-2 rounded shadow bg-green-600">{{searchQuery}}</span>
        </div>
        <div v-else-if="searchQuery.length != 0 && searchQuery.length < 3">
          minimal 3 huruf
        </div>
        <hr class="my-2"/>

        <div v-if="loading">Loading....</div>
        <div class="flex flex-wrap -mx-2">
          <div v-for="list in filter" class="w-1/3 sm:px-2">
            <div @click="test(list)">
              <img :src="list.thumbnailUrl" class="shadow-md block mx-auto sm:rounded-lg w-full" alt="" />
            </div>
            <div class="hidden sm:block text-center my-2">{{list.title}}</div>
          </div>
        </div>
      </div>
     <div v-else class="container mx-auto" style="max-width: 600px;">
       <div class="p-2 rounded bg-red-600 text-white" @click="popup=false">Close</div>
      <img :src="item.url" class="shadow-md block mx-auto" alt="" />
      <div>{{item.title}}</div>
     </div>
      <!-- <button >tes</button> -->
    </div>

    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="src/js/data.js"></script>
    <script>
      const app = new Vue({
        el: "#app",

        data() {
          return {
            searchQuery: "",
            resources: data,
            filter: [],
            loading: false,
            popup:false,
            item : ''
          };
        },

        methods: {
          test:function(data){
            this.item = data;
            this.popup=true;

          },
          filteredResources: async function (e) {
            this.loading = true;
            this.filter = "";
            await this.wait(100);
            if (this.searchQuery.length > 3) {
              this.filter = this.resources.filter((data) =>
                data.title.startsWith(this.searchQuery)
              );
              this.loading = false;
            } else {
              this.loading = false;
              this.filter = this.resources;
            }
          },
          wait: async function (ms) {
            return new Promise((resolve) => setTimeout(resolve, ms));
          },
        },
        watch: {
          todos() {
            console.log("melihat");
          },
        },
        created() {
          this.filteredResources();
        },
      });
    </script>
  </body>
</html>
